<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CZ MultiViewer</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main class="wrap">
      <header class="head">
        <h1>
          <img src="../icon-32.png" class="logo" alt="" />
          CZ MultiViewer
        </h1>
        <p>채널 ID 또는 라이브/채널 URL을 줄바꿈으로 입력하세요.</p>
      </header>

      <textarea
        id="input"
        rows="10"
        placeholder="예:
https://chzzk.naver.com/live/0123456789abcdef0123456789abcdef
https://chzzk.naver.com/0123456789abcdef0123456789abcdef
0123456789abcdef0123456789abcdef"
      ></textarea>

      <div class="meta">
        <div class="count" id="count">인식된 채널: 0</div>
        <div class="hint-note">※ 중복 입력은 자동으로 제거돼요.</div>
        <div class="errors" id="errors" aria-live="polite"></div>
      </div>

      <div class="chips" id="chips" aria-label="채널 미리보기"></div>
      <div class="hint-note chips-help">※ 드래그로 순서를 변경할 수 있어요.</div>

      <div class="actions">
        <button id="open" class="btn primary">멀티뷰 열기</button>
        <div class="actions-sub">
          <button id="grab" class="btn ghost" type="button">현재 탭 추가</button>
          <button id="clear" class="btn ghost" type="button">초기화</button>
        </div>
      </div>

      <section class="options is-collapsed" id="favoritesSection">
        <button id="favoritesToggle" class="options-toggle" type="button" aria-expanded="false">
          <span class="options-toggle-icon" aria-hidden="true">&#x25B6;</span>
          <span class="options-toggle-text">즐겨찾기</span>
        </button>
        <div class="settings">
          <div id="favoritesEmpty" class="setting-note">즐겨찾기 없음</div>
          <div id="favoritesList" class="favorites-list" role="list"></div>
          <div id="favoritesNotice" class="errors favorites-notice"></div>
        </div>
      </section>

      <section class="options is-collapsed" id="optionsSection">
        <button id="optionsToggle" class="options-toggle" type="button" aria-expanded="false">
          <span class="options-toggle-icon" aria-hidden="true">▶</span>
          <span class="options-toggle-text">설정</span>
        </button>
        <div class="settings">
          <div class="settings-group">
            <div class="setting-row">
              <label class="setting-label" for="headerDefaultToggle">상단 바 숨기기(전체)</label>
              <input id="headerDefaultToggle" type="checkbox" />
            </div>
            <div class="setting-row">
              <span class="setting-label">채팅창 위치</span>
              <div class="segmented" role="group" aria-label="채팅창 위치">
                <input type="radio" name="chatPosition" id="chatPositionLeft" value="left" />
                <label class="segmented-btn" for="chatPositionLeft">왼쪽</label>
                <input type="radio" name="chatPosition" id="chatPositionRight" value="right" checked />
                <label class="segmented-btn" for="chatPositionRight">오른쪽</label>
              </div>
            </div>
            <div class="setting-row">
              <label class="setting-label" for="showChatTimestampToggle">채팅 타임스탬프 표시</label>
              <input id="showChatTimestampToggle" type="checkbox" />
            </div>
          </div>
          <div class="settings-group">
            <div class="setting-box">
              <div class="setting-row setting-row-plain">
                <label class="setting-label" for="autoFfToggle">딜레이 초과 시 자동 동기화</label>
                <input id="autoFfToggle" type="checkbox" />
              </div>
              <div class="setting-row setting-row-plain setting-row-stack">
                <label class="setting-label" for="autoFfThreshold">기준 지연 시간(초)</label>
                <div class="threshold-controls">
                  <input
                    id="autoFfThreshold"
                    class="threshold-input"
                    type="number"
                    min="5"
                    max="30"
                    step="1"
                    inputmode="numeric"
                  />
                  <div class="preset-group" role="group" aria-label="기준 지연 시간 프리셋">
                    <button type="button" class="preset-btn auto-ff-preset" data-value="8">8</button>
                    <button type="button" class="preset-btn auto-ff-preset" data-value="12">12</button>
                    <button type="button" class="preset-btn auto-ff-preset" data-value="20">20</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="setting-box">
              <div class="setting-row setting-row-plain">
                <label class="setting-label" for="autoRewardClaimToggle">통나무 자동 획득</label>
                <input id="autoRewardClaimToggle" type="checkbox" />
              </div>
            </div>
          </div>
          <div class="setting-note">※ 설정은 새로 연 멀티뷰부터 적용됩니다.</div>
        </div>
      </section>
      <div class="footer-links">
        <a href="https://github.com/selentia/czviewer" target="_blank" aria-label="GitHub">
          <img src="/github_icon.png" class="footer-icon" alt="" />
        </a>
        <a href="https://x.com/selentia01" target="_blank" aria-label="X">
          <img src="/x_icon.png" class="footer-icon" alt="" />
        </a>
      </div>
    </main>

    <script src="../shared/messages.js"></script>
    <script src="../shared/channelId.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
